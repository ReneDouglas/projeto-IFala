<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Documentação do Sistema IFala</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      :root {
        --bg-sidebar: #0f172a;
        --bg-main: #f9fafb;
        --bg-card: #ffffff;
        --accent: #2563eb;
        --accent-soft: #dbeafe;
        --text-main: #0f172a;
        --text-muted: #6b7280;
        --border-subtle: #e5e7eb;
        --scrollbar-bg: #0f172a;
        --scrollbar-thumb: #1f2937;
        --code-bg: #0b1120;
        --code-border: #1f2937;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
          sans-serif;
        background: var(--bg-main);
        color: var(--text-main);
        line-height: 1.6;
      }

      a {
        color: var(--accent);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .layout {
        display: flex;
        min-height: 100vh;
      }

      /* SIDEBAR */
      .sidebar {
        width: 290px;
        background: var(--bg-sidebar);
        color: #e5e7eb;
        padding: 1.5rem 1.25rem;
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
      }

      .sidebar::-webkit-scrollbar {
        width: 8px;
      }

      .sidebar::-webkit-scrollbar-track {
        background: var(--scrollbar-bg);
      }

      .sidebar::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 999px;
      }

      .brand h1 {
        font-size: 1.25rem;
        font-weight: 700;
        display: flex;
        gap: 0.4rem;
        align-items: center;
      }

      .logo-badge {
        width: 28px;
        height: 28px;
        background: linear-gradient(135deg, #22c55e, #22d3ee);
        border-radius: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 800;
        color: #020617;
      }

      .brand p {
        font-size: 0.8rem;
        margin-top: 0.25rem;
        color: #9ca3af;
      }

      .sidebar-section-title {
        margin-top: 1.5rem;
        margin-bottom: 0.6rem;
        font-size: 0.8rem;
        color: #9ca3af;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .nav-list {
        list-style: none;
      }

      .nav-link {
        display: block;
        padding: 0.35rem 0.55rem;
        border-radius: 0.5rem;
        color: #e5e7eb;
        font-size: 0.9rem;
      }

      .nav-link:hover {
        background: rgba(148, 163, 184, 0.25);
      }

      .nav-link.active {
        background: rgba(37, 99, 235, 0.4);
      }

      .nav-link.small {
        padding-left: 1.2rem;
        font-size: 0.85rem;
      }

      .nav-link.tiny {
        padding-left: 2rem;
        font-size: 0.8rem;
      }

      /* MAIN */
      .main {
        flex: 1;
        padding: 2rem;
        max-width: 1100px;
        margin: 0 auto;
      }

      .section {
        margin-bottom: 2.5rem;
      }

      .section h2 {
        font-size: 1.6rem;
        margin-bottom: 0.75rem;
      }

      .section h3 {
        font-size: 1.25rem;
        margin: 1rem 0 0.5rem;
      }

      .section h4 {
        font-size: 1.05rem;
        margin: 0.75rem 0 0.35rem;
      }

      .code-block {
        background: var(--code-bg);
        color: #e5e7eb;
        padding: 0.9rem;
        border-radius: 0.5rem;
        font-family: monospace;
        margin: 0.6rem 0 1rem;
        overflow-x: auto;
        font-size: 0.85rem;
        border: 1px solid var(--code-border);
      }

      ul,
      ol {
        margin-left: 1.2rem;
        margin-bottom: 0.6rem;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 0.8rem 0 1.2rem;
        font-size: 0.9rem;
        background: #fff;
      }

      th,
      td {
        border: 1px solid var(--border-subtle);
        padding: 0.4rem 0.5rem;
        text-align: left;
      }

      th {
        background: #e5e7eb;
      }
    </style>
  </head>

  <body>
    <div class="layout">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="brand">
          <h1><span class="logo-badge">IF</span>IFala Docs</h1>
          <p>Documentação oficial do sistema</p>
        </div>

        <div class="sidebar-section-title">Visão Geral</div>
        <ul class="nav-list">
          <li><a href="#sobre-ifala" class="nav-link">Sobre o IFala</a></li>
          <li>
            <a href="#equipe-desenvolvimento" class="nav-link"
              >Equipe de Desenvolvimento</a
            >
          </li>
          <li>
            <a href="#primeiros-passos" class="nav-link">Primeiros passos</a>
          </li>
        </ul>

        <div class="sidebar-section-title">Para o aluno</div>
        <ul class="nav-list">
          <li><a href="#para-aluno" class="nav-link">Visão geral</a></li>
          <li>
            <a href="#como-realizar-denuncia" class="nav-link small"
              >Como realizar uma denúncia</a
            >
          </li>
          <li>
            <a href="#como-acompanhar-denuncia" class="nav-link small"
              >Como funciona o acompanhamento</a
            >
          </li>
        </ul>

        <div class="sidebar-section-title">Para o servidor</div>
        <ul class="nav-list">
          <li><a href="#para-servidor" class="nav-link">Visão geral</a></li>
          <li>
            <a href="#login-servidor" class="nav-link small"
              >Realizando o login</a
            >
          </li>
          <li>
            <a href="#cadastro-servidor" class="nav-link small"
              >Cadastro de novo servidor</a
            >
          </li>
          <li>
            <a href="#painel-denuncias" class="nav-link small"
              >Painel de denúncias</a
            >
          </li>
          <li>
            <a href="#acompanhar-servidor" class="nav-link small"
              >Acompanhamento de denúncia</a
            >
          </li>
        </ul>

        <div class="sidebar-section-title">Arquitetura e Serviços</div>
        <ul class="nav-list">
          <li>
            <a href="#arquitetura-servicos" class="nav-link"
              >Arquitetura e Serviços</a
            >
          </li>
          <li>
            <a href="#arquitetura-geral" class="nav-link small"
              >Arquitetura Geral</a
            >
          </li>
          <li>
            <a href="#fluxo-dados" class="nav-link small">Fluxo de dados</a>
          </li>
          <li><a href="#backend" class="nav-link">Backend (Spring Boot)</a></li>
          <li>
            <a href="#backend-estrutura-pacotes" class="nav-link small"
              >Estrutura de pacotes</a
            >
          </li>
          <li>
            <a href="#backend-modulos-funcionais" class="nav-link small"
              >Módulos Funcionais</a
            >
          </li>
          <li>
            <a href="#frontend" class="nav-link">Frontend (React + Vite)</a>
          </li>
          <li>
            <a href="#frontend-estrutura" class="nav-link small"
              >Estrutura de pacotes</a
            >
          </li>
          <li>
            <a href="#frontend-componentes" class="nav-link small"
              >Componentes principais</a
            >
          </li>
          <li>
            <a href="#frontend-roteamento" class="nav-link small"
              >Roteamento e Navegação</a
            >
          </li>
          <li>
            <a href="#frontend-integracao-api" class="nav-link small"
              >Integração com a API</a
            >
          </li>
          <li><a href="#banco-dados" class="nav-link">Banco de Dados</a></li>
          <li>
            <a href="#banco-mer" class="nav-link small"
              >Modelo entidade-relacionamento</a
            >
          </li>
          <li>
            <a href="#banco-flyway" class="nav-link small"
              >Migração com Flyway</a
            >
          </li>
          <li><a href="#monitoramento" class="nav-link">Monitoramento</a></li>
          <li>
            <a href="#monitoramento-fluxo" class="nav-link small"
              >Fluxo de monitoramento</a
            >
          </li>
          <li>
            <a href="#monitoramento-actuator" class="nav-link small"
              >Spring Boot Actuator</a
            >
          </li>
          <li>
            <a href="#monitoramento-prometheus" class="nav-link small"
              >Prometheus</a
            >
          </li>
          <li>
            <a href="#monitoramento-promtail" class="nav-link small"
              >Promtail</a
            >
          </li>
          <li>
            <a href="#monitoramento-grafana" class="nav-link small">Grafana</a>
          </li>
          <li><a href="#monitoramento-loki" class="nav-link small">Loki</a></li>
          <li>
            <a href="#monitorar-producao" class="nav-link small"
              >Monitorar em produção</a
            >
          </li>
          <li>
            <a href="#acesso-grafana" class="nav-link small">Acessar Grafana</a>
          </li>
          <li>
            <a href="#dashboard-aplicacao" class="nav-link small"
              >Dashboard da aplicação</a
            >
          </li>
          <li>
            <a href="#tecnologias" class="nav-link">Tecnologias utilizadas</a>
          </li>
        </ul>

        <div class="sidebar-section-title">Guia de Desenvolvimento</div>
        <ul class="nav-list">
          <li>
            <a href="#guia-dev" class="nav-link">Guia de Desenvolvimento</a>
          </li>
          <li>
            <a href="#criar-branch" class="nav-link small"
              >Criação de uma Nova Branch</a
            >
          </li>
          <li>
            <a href="#boas-praticas-commits" class="nav-link small"
              >Boas Práticas de Commits</a
            >
          </li>
          <li>
            <a href="#criar-pr" class="nav-link small">Criar Pull Request</a>
          </li>
          <li>
            <a href="#deploy-producao" class="nav-link small"
              >Deploy em produção</a
            >
          </li>
          <li>
            <a href="#docker" class="nav-link small"
              >Conteinerização com Docker</a
            >
          </li>
          <li>
            <a href="#nginx-gateway" class="nav-link small">NGINX Gateway</a>
          </li>
          <li>
            <a href="#variaveis-ambiente" class="nav-link small"
              >Variáveis de Ambiente</a
            >
          </li>
          <li>
            <a href="#credenciais-producao" class="nav-link small"
              >Credenciais para produção</a
            >
          </li>
          <li><a href="#pipelines" class="nav-link small">Pipelines</a></li>
          <li>
            <a href="#passo-a-passo-cli" class="nav-link small"
              >Passo a passo via linha de comando</a
            >
          </li>
          <li>
            <a href="#deploy-tui" class="nav-link small">Deploy via tui.sh</a>
          </li>
          <li><a href="#sobre-tui" class="nav-link small">Sobre o TUI</a></li>
        </ul>
      </aside>

      <!-- MAIN -->
      <main class="main">
        <!-- ========================================= -->
        <!-- SOBRE O IFALA -->
        <!-- ========================================= -->
        <section id="sobre-ifala" class="section">
          <h2>Sobre o IFala</h2>
          <p>
            O IFala é um sistema desenvolvido para o IFPI com o objetivo de
            centralizar, organizar e acompanhar denúncias feitas por alunos,
            garantindo sigilo, rastreabilidade e transparência no tratamento dos
            casos.
          </p>
          <p>
            Ele permite que alunos registrem denúncias (podendo optar por
            anonimato), e que servidores coordenadores acompanhem, analisem e
            atuem em cada caso seguindo um fluxo padrão definido
            institucionalmente.
          </p>
        </section>

        <!-- ========================================= -->
        <!-- EQUIPE -->
        <!-- ========================================= -->
        <section id="equipe-desenvolvimento" class="section">
          <h2>Equipe de Desenvolvimento</h2>
          <p>
            A documentação foi pensada para ser colaborativa. A task de
            documentação:
          </p>
          <ul>
            <li>Não deve ser movida do Backlog;</li>
            <li>Não deve ser associada a nenhum assignee específico;</li>
            <li>Requer trabalho mútuo da equipe;</li>
            <li>
              É uma oportunidade para quem ainda não contribuiu com o projeto;
            </li>
            <li>
              Interessados devem se manifestar diretamente com o
              mantenedor/responsável.
            </li>
          </ul>
        </section>

        <!-- ========================================= -->
        <!-- PRIMEIROS PASSOS -->
        <!-- ========================================= -->
        <section id="primeiros-passos" class="section">
          <h2>Primeiros passos</h2>

          <h3>Clonando o repositório</h3>
          <div class="code-block">
            git clone &lt;https://ifala.ifpi.edu.br&gt; cd projeto-IFala
          </div>

          <h3>Subindo o ambiente com Docker</h3>
          <p>
            O ambiente local é orquestrado via
            <code>docker-compose.yml</code> na raiz do projeto.
          </p>
          <div class="code-block">docker compose up -d --build</div>
          <ul>
            <li>Frontend (React + Vite): <code>http://localhost:5173</code></li>
            <li>Backend (Spring Boot): <code>http://localhost:8080</code></li>
            <li>PostgreSQL: <code>localhost:5432</code></li>
            <li>Prometheus: <code>http://localhost:9090</code></li>
            <li>Grafana: <code>http://localhost:3000</code></li>
            <li>Loki: <code>http://localhost:3100</code></li>
          </ul>
        </section>

        <!-- ========================================= -->
        <!-- PARA O ALUNO -->
        <!-- ========================================= -->
        <section id="para-aluno" class="section">
          <h2>Para o aluno</h2>
          <p>
            Esta seção descreve o fluxo de uso do IFala pelo aluno: como
            registrar denúncias e como acompanhar o andamento.
          </p>

          <section id="como-realizar-denuncia">
            <h3>Como realizar uma denúncia</h3>
            <ol>
              <li>Acessar a interface do IFala destinada ao aluno.</li>
              <li>Clicar em <strong>Nova denúncia</strong> ou equivalente.</li>
              <li>
                Preencher:
                <ul>
                  <li>Categoria (assédio, bullying, discriminação, etc.);</li>
                  <li>Descrição detalhada do ocorrido;</li>
                  <li>Local, data e envolvidos (se desejar informar);</li>
                  <li>Marcar se a denúncia será anônima ou identificada.</li>
                </ul>
              </li>
              <li>Anexar arquivos (opcional: prints, fotos, PDFs).</li>
              <li>
                Enviar a denúncia e salvar o
                <strong>código de acompanhamento</strong>.
              </li>
            </ol>
          </section>

          <section id="como-acompanhar-denuncia">
            <h3>Como funciona o acompanhamento da denúncia</h3>
            <ol>
              <li>Acessar a área <strong>Acompanhar denúncia</strong>.</li>
              <li>Informar o código de acompanhamento gerado no envio.</li>
              <li>
                Visualizar:
                <ul>
                  <li>
                    Status atual (Recebida, Em análise, Em andamento, Concluída,
                    etc.);
                  </li>
                  <li>
                    Histórico de movimentações (data, responsável, alteração de
                    status);
                  </li>
                  <li>Mensagens da coordenação (quando apropriado).</li>
                </ul>
              </li>
            </ol>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- PARA O SERVIDOR COORDENADOR -->
        <!-- ========================================= -->
        <section id="para-servidor" class="section">
          <h2>Para o servidor coordenador</h2>
          <p>
            Servidores coordenadores têm acesso ao painel administrativo do
            IFala, com login, gerenciamento de usuários e acompanhamento de
            denúncias.
          </p>

          <section id="login-servidor">
            <h3>Realizando o login</h3>
            <p>
              O login é realizado através da rota administrativa do frontend.
            </p>
            <div class="code-block">URL (dev): http://localhost:5173/admin</div>
            <ol>
              <li>Informar e-mail institucional e senha.</li>
              <li>
                A aplicação envia um <code>POST /api/auth/login</code> para o
                backend.
              </li>
              <li>O backend valida as credenciais e gera um token JWT.</li>
              <li>
                O frontend armazena o token e usa em requisições autenticadas.
              </li>
            </ol>
          </section>

          <section id="cadastro-servidor">
            <h3>Realizando o cadastro de um novo servidor</h3>
            <ol>
              <li>
                Com um usuário autorizado, acessar o módulo de
                <strong>Gestão de usuários</strong> no painel.
              </li>
              <li>Clicar em <strong>Novo servidor</strong>.</li>
              <li>
                Informar dados do servidor (nome, e-mail, perfil, campus, etc.).
              </li>
              <li>Definir permissões (ex.: coordenador, administrador).</li>
              <li>Salvar e orientar o servidor a realizar o primeiro login.</li>
            </ol>
          </section>

          <section id="painel-denuncias">
            <h3>Como funciona o painel de denúncias</h3>
            <ul>
              <li>
                Listagem de todas as denúncias com filtros (status, data,
                categoria, campus).
              </li>
              <li>Busca por código de acompanhamento.</li>
              <li>
                Acesso ao detalhe da denúncia (descrição, anexos, histórico,
                autor quando não anônimo).
              </li>
              <li>
                Ação de alteração de status e inclusão de comentários internos.
              </li>
            </ul>
          </section>

          <section id="acompanhar-servidor">
            <h3>Como funciona o acompanhamento de uma denúncia (servidor)</h3>
            <ol>
              <li>Abrir o detalhe da denúncia no painel.</li>
              <li>Avaliar o conteúdo, anexos e histórico.</li>
              <li>
                Registrar movimentações (por exemplo, “Encaminhado à coordenação
                de curso”).
              </li>
              <li>Atualizar o status conforme a etapa de tratamento.</li>
              <li>
                As atualizações relevantes aparecem para o aluno no
                acompanhamento.
              </li>
            </ol>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- ARQUITETURA E SERVIÇOS -->
        <!-- ========================================= -->
        <section id="arquitetura-servicos" class="section">
          <h2>Arquitetura e Serviços</h2>
          <p>
            O IFala é composto por três camadas principais: frontend web,
            backend (API REST) e infraestrutura de banco de dados e
            observabilidade.
          </p>

          <section id="arquitetura-geral">
            <h3>Arquitetura Geral</h3>

            <p>Visão geral dos componentes:</p>
            <div class="code-block">
              [Aluno/Servidor] → Frontend (React + Vite, porta 5173) ↓ Backend
              (Spring Boot, porta 8080) ↓ PostgreSQL (Banco de Dados) ↓
              Monitoramento (Actuator → Prometheus → Grafana + Loki/Promtail)
            </div>

            <div class="code-block">
              apps/ ├── ifala-backend/ # API (Spring Boot) │ └──
              src/main/java/br/edu/ifpi/ifala/ │ ├── auth/ │ ├── denuncia/ │ ├──
              notificacao/ │ ├── configuracao/ │ └── monitoring/ │ ├──
              ifala-frontend/ # Interface web (React + Vite + TS) │ └── src/ │
              ├── pages/ │ ├── components/ │ ├── layouts/ │ ├── router/ │ └──
              services/api.ts │ └── docker/ # Arquivos de configuração de
              monitoramento
            </div>
          </section>

          <section id="fluxo-dados">
            <h3>Fluxo de dados</h3>
            <p>Exemplo de fluxo para criação e acompanhamento de denúncia:</p>
            <div class="code-block">
              [1] Frontend → POST /api/denuncias - Envia dados preenchidos pelo
              aluno. [2] Backend: - Valida payload; - Gera código de
              acompanhamento; - Persiste na tabela "denuncia"; - Registra
              histórico inicial em "denuncia_log"; - Dispara evento para módulo
              de notificações. [3] Banco de Dados (PostgreSQL): - Armazena
              denúncia + logs. [4] Módulo de Notificações: - Envia alertas para
              coordenadores (e-mail, painel interno). [5] Aluno → GET
              /api/denuncias/acompanhamento/{codigo} - Recupera status +
              histórico. [6] Servidor → PUT /api/denuncias/{id}/status -
              Atualiza status e histórico, visível no acompanhamento do aluno.
            </div>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- BACKEND -->
        <!-- ========================================= -->
        <section id="backend" class="section">
          <h2>Backend (Spring Boot)</h2>
          <p>
            O backend é baseado em Spring Boot, organizado por domínios
            funcionais.
          </p>

          <section id="backend-estrutura-pacotes">
            <h3>Estrutura de pacotes</h3>
            <div class="code-block">
              apps/ifala-backend/src/main/java/br/edu/ifpi/ifala/ ├── auth/ #
              Autenticação (JWT, login) ├── denuncia/ # Fluxo de denúncias ├──
              notificacao/ # Notificações internas/externas ├── configuracao/ #
              Configurações globais (security, CORS, etc.) └── monitoring/ #
              Integração com Actuator/monitoramento
            </div>
          </section>

          <section id="backend-modulos-funcionais">
            <h3>Módulos Funcionais</h3>

            <h4>Módulo de denúncias</h4>
            <p>Responsável pelo ciclo de vida completo das denúncias.</p>

            <h4>Fluxo de criação e acompanhamento</h4>
            <div class="code-block">
              [1] POST /api/denuncias { "categoria": "Assédio", "descricao":
              "...", "anonimo": true, "local": "Bloco B", "dataFato":
              "2025-11-10" } [2] Service: - valida; - gera
              codigo_acompanhamento; - salva na tabela "denuncia"; - cria
              entrada em "denuncia_log"; - dispara evento para notificações. [3]
              GET /api/denuncias/acompanhamento/{codigo} - consulta por
              codigo_acompanhamento; - retorna status + histórico. [4] Servidor
              atualiza status: PUT /api/denuncias/{id}/status
            </div>

            <h4>Módulo de Autenticação</h4>
            <p>Responsável por autenticar servidores via JWT.</p>
            <h4>Fluxo de autenticação</h4>
            <div class="code-block">
              [1] POST /api/auth/login { "email": "servidor@ifpi.edu.br",
              "senha": "******" } [2] Backend: - Autentica usuário; - Gera JWT
              com roles (ex.: ROLE_COORDENADOR); - Retorna token. [3] Frontend:-
              Armazena token; - Envia Authorization: Bearer &lt;token&gt; em
              rotas privadas.
            </div>

            <h4>Módulo de Notificações</h4>
            <p>
              Centraliza envio de notificações internas (painel) e externas
              (e-mail), disparadas a partir de eventos do sistema.
            </p>
            <h4>Fluxo de notificações internas e externas</h4>
            <div class="code-block">
              [1] Nova denúncia criada → evento de domínio (ApplicationEvent).
              [2] Listener de eventos: - Carrega denúncia e destinatários; -
              Monta mensagem. [3] Notificações externas: - Envio de e-mail para
              coordenadores. [4] Notificações internas: - Registra na tabela
              "notificacao" para exibição no painel. [5] Atualização de status:
              - Ao alterar status, novo evento pode disparar notificações ao
              aluno (quando houver identificação) e responsáveis.
            </div>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- FRONTEND -->
        <!-- ========================================= -->
        <section id="frontend" class="section">
          <h2>Frontend (React + Vite + TypeScript)</h2>

          <section id="frontend-estrutura">
            <h3>Estrutura de pacotes</h3>
            <div class="code-block">
              apps/ifala-frontend/src/ ├── pages/ │ ├── aluno/ │ │ ├──
              CriarDenuncia.tsx │ │ └── AcompanharDenuncia.tsx │ └── admin/ │
              ├── Login.tsx │ ├── Dashboard.tsx │ └── DetalheDenuncia.tsx ├──
              components/ │ ├── Header.tsx │ ├── Sidebar.tsx │ └──
              DenunciaCard.tsx ├── layouts/ │ ├── PublicLayout.tsx │ └──
              AdminLayout.tsx ├── router/ │ └── index.tsx ├── services/ │ └──
              api.ts └── main.tsx
            </div>
          </section>

          <section id="frontend-componentes">
            <h3>Componentes principais</h3>
            <ul>
              <li>
                <strong>Header</strong> – Cabeçalho com título/logo e navegação
                básica.
              </li>
              <li>
                <strong>Sidebar</strong> – Menu lateral do painel
                administrativo.
              </li>
              <li>
                <strong>DenunciaCard</strong> – Componente para exibir uma
                denúncia na listagem.
              </li>
              <li>
                <strong>Formulários</strong> – Componentes controlados para
                criação de denúncia, login, etc.
              </li>
            </ul>
          </section>

          <section id="frontend-roteamento">
            <h3>Roteamento e Navegação</h3>
            <p>
              Usa React Router (ou similar) para mapear rotas públicas e
              privadas.
            </p>
            <div class="code-block">
              / (público) ├── "/" → CriarDenuncia └── "/acompanhar" →
              AcompanharDenuncia /admin (privado) ├── "/admin" → Dashboard └──
              "/admin/denuncia/:id" → DetalheDenuncia
            </div>
          </section>

          <section id="frontend-integracao-api">
            <h3>Integração com a API (Spring Boot)</h3>
            <p>O cliente HTTP é configurado em <code>services/api.ts</code>.</p>
            <div class="code-block">
              import axios from "axios"; export const api = axios.create({
              baseURL: "http://localhost:8080/api", });
              api.interceptors.request.use((config) =&gt; { const token =
              localStorage.getItem("ifala_token"); if (token) {
              config.headers.Authorization = `Bearer ${token}`; } return config;
              });
            </div>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- BANCO DE DADOS -->
        <!-- ========================================= -->
        <section id="banco-dados" class="section">
          <h2>Banco de Dados</h2>

          <section id="banco-mer">
            <h3>Modelo entidade-relacionamento</h3>
            <ul>
              <li>
                <strong>denuncia</strong> – informação principal da denúncia.
              </li>
              <li>
                <strong>denuncia_log</strong> – histórico de alterações de
                status e comentários.
              </li>
              <li>
                <strong>usuario</strong> – servidores
                coordenadores/administradores.
              </li>
              <li>
                <strong>notificacao</strong> – notificações internas associadas
                a eventos.
              </li>
            </ul>
          </section>

          <section id="banco-flyway">
            <h3>Como funciona o processo de migração com Flyway</h3>
            <p>
              As migrações são versionadas em
              <code>src/main/resources/db/migration</code>.
            </p>
            <div class="code-block">
              apps/ifala-backend/src/main/resources/db/migration/ ├──
              V1__criacao_tabelas_iniciais.sql ├── V2__ajustes_denuncia.sql └──
              V3__tabela_notificacao.sql
            </div>
            <p>
              Ao subir o backend, o Flyway executa as migrações em ordem
              numérica, garantindo que o banco esteja sempre alinhado com o
              código.
            </p>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- MONITORAMENTO -->
        <!-- ========================================= -->
        <section id="monitoramento" class="section">
          <h2>Monitoramento</h2>

          <section id="monitoramento-fluxo">
            <h3>Como funciona o fluxo de monitoramento</h3>
            <div class="code-block">
              [Backend] → expõe métricas no /actuator/prometheus ↓ [Prometheus]
              coleta periodicamente essas métricas ↓ [Grafana] consome
              Prometheus como datasource para dashboards ↓ [Promtail] envia logs
              dos containers para o Loki ↓ [Loki] centraliza os logs ↓ [Grafana]
              visualiza e pesquisa logs via Loki
            </div>
          </section>

          <section id="monitoramento-actuator">
            <h3>Spring Boot Actuator</h3>
            <p>Fornece endpoints de monitoramento, como:</p>
            <ul>
              <li><code>/actuator/health</code></li>
              <li><code>/actuator/info</code></li>
              <li><code>/actuator/prometheus</code></li>
            </ul>
          </section>

          <section id="monitoramento-prometheus">
            <h3>Prometheus</h3>
            <p>
              Responsável por coletar e armazenar séries temporais de métricas.
              A configuração inclui o backend como target no
              <code>prometheus.yml</code>.
            </p>
          </section>

          <section id="monitoramento-promtail">
            <h3>Promtail</h3>
            <p>
              Agente responsável por coletar logs dos containers Docker e enviar
              para o Loki.
            </p>
          </section>

          <section id="monitoramento-grafana">
            <h3>Grafana</h3>
            <p>
              Interface visual para dashboards de métricas e exploração de logs.
            </p>
          </section>

          <section id="monitoramento-loki">
            <h3>Loki</h3>
            <p>
              Banco de logs escalável, integrado com Grafana. Permite consultar
              logs por labels, como nome do container, serviço, nível de log,
              etc.
            </p>
          </section>

          <section id="monitorar-producao">
            <h3>Como monitorar a aplicação em produção</h3>
            <ul>
              <li>
                Acompanhar dashboards de disponibilidade e uso de recursos (CPU,
                memória, erros HTTP).
              </li>
              <li>Monitorar taxas de erro (5xx, 4xx) por endpoint.</li>
              <li>Observar volume de denúncias e tempo médio de resposta.</li>
            </ul>
          </section>

          <section id="acesso-grafana">
            <h3>Como acessar o Grafana</h3>
            <div class="code-block">
              URL (dev): http://localhost:3000 Usuário/senha padrão (apenas
              exemplo, ajustar em produção): - admin / admin
            </div>
          </section>

          <section id="dashboard-aplicacao">
            <h3>Visualizando o dashboard da aplicação</h3>
            <ol>
              <li>Acessar o Grafana.</li>
              <li>Selecionar o dashboard do IFala (quando configurado).</li>
              <li>
                Acompanhar gráficos de:
                <ul>
                  <li>Quantidade de requisições;</li>
                  <li>Latência média;</li>
                  <li>Erros por rota;</li>
                  <li>Uso da base de dados e uso de recursos.</li>
                </ul>
              </li>
            </ol>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- TECNOLOGIAS UTILIZADAS -->
        <!-- ========================================= -->
        <section id="tecnologias" class="section">
          <h2>Tecnologias utilizadas</h2>
          <p>
            (Exemplos de versões – ajustar para os valores reais do projeto)
          </p>
          <table>
            <thead>
              <tr>
                <th>Tecnologia</th>
                <th>Versão (exemplo)</th>
                <th>Uso</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Java</td>
                <td>17</td>
                <td>Backend (Spring Boot)</td>
              </tr>
              <tr>
                <td>Spring Boot</td>
                <td>3.x</td>
                <td>API REST, segurança, Actuator</td>
              </tr>
              <tr>
                <td>PostgreSQL</td>
                <td>15</td>
                <td>Banco de dados relacional</td>
              </tr>
              <tr>
                <td>Flyway</td>
                <td>9.x</td>
                <td>Migração de banco</td>
              </tr>
              <tr>
                <td>Node.js</td>
                <td>18.x</td>
                <td>Ambiente para build do frontend</td>
              </tr>
              <tr>
                <td>React</td>
                <td>18.x</td>
                <td>Interface do usuário</td>
              </tr>
              <tr>
                <td>Vite</td>
                <td>4.x</td>
                <td>Bundler para o frontend</td>
              </tr>
              <tr>
                <td>TypeScript</td>
                <td>5.x</td>
                <td>Tipagem estática no frontend</td>
              </tr>
              <tr>
                <td>Docker</td>
                <td>20+</td>
                <td>Conteinerização</td>
              </tr>
              <tr>
                <td>Prometheus</td>
                <td>2.x</td>
                <td>Coleta de métricas</td>
              </tr>
              <tr>
                <td>Grafana</td>
                <td>9.x</td>
                <td>Dashboards e visualização</td>
              </tr>
              <tr>
                <td>Loki</td>
                <td>2.x</td>
                <td>Centralização de logs</td>
              </tr>
              <tr>
                <td>Promtail</td>
                <td>2.x</td>
                <td>Coleta de logs</td>
              </tr>
              <tr>
                <td>NGINX</td>
                <td>1.23+</td>
                <td>Gateway / Reverse Proxy (produção)</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- ========================================= -->
        <!-- GUIA DE DESENVOLVIMENTO -->
        <!-- ========================================= -->
        <section id="guia-dev" class="section">
          <h2>Guia de Desenvolvimento</h2>
          <p>Boas práticas para contribuir com o IFala.</p>

          <section id="criar-branch">
            <h3>Criação de uma Nova Branch</h3>
            <div class="code-block">
              # Atualizar branch base (development, por exemplo) git switch
              development git pull origin development # Criar nova branch de
              feature/bugfix/docs git switch -c feature/nome-da-feature # ou git
              switch -c docs/documentacao-ifala
            </div>
          </section>

          <section id="boas-praticas-commits">
            <h3>Boas Práticas de Commits</h3>
            <ul>
              <li>Mensagens curtas e objetivas;</li>
              <li>
                Prefixos semânticos:
                <ul>
                  <li><code>feat:</code> nova funcionalidade;</li>
                  <li><code>fix:</code> correção de bug;</li>
                  <li><code>docs:</code> documentação;</li>
                  <li>
                    <code>refactor:</code> melhoria de código sem mudar
                    comportamento;
                  </li>
                  <li><code>test:</code> testes;</li>
                  <li><code>chore:</code> tarefas de manutenção.</li>
                </ul>
              </li>
            </ul>
            <div class="code-block">
              feat: adiciona fluxo de acompanhamento de denúncia fix: corrige
              validação de login no backend docs: adiciona documentação de
              arquitetura do IFala
            </div>
          </section>

          <section id="criar-pr">
            <h3>Criar Pull Request</h3>
            <ol>
              <li>
                Subir a branch para o repositório remoto:
                <div class="code-block">
                  git push origin feature/nome-da-feature
                </div>
              </li>
              <li>Abrir o repositório no GitHub.</li>
              <li>
                Criar um Pull Request da branch para
                <code>development</code> (ou branch principal definida).
              </li>
              <li>
                Adicionar descrição clara, prints (se aplicável) e link de
                issues.
              </li>
              <li>Aguardar revisão e ajustes solicitados.</li>
            </ol>
          </section>

          <section id="deploy-producao">
            <h3>Deploy em produção</h3>
            <p>Pode ser realizado via pipeline CI/CD ou manualmente.</p>
          </section>

          <section id="docker">
            <h3>Conteinerização com Docker</h3>
            <p>
              O <code>docker-compose.yml</code> define os serviços principais:
              backend, frontend, banco, Prometheus, Grafana, Loki e Promtail.
            </p>
            <div class="code-block">
              services: ifala-db: image: postgres:15 container_name: ifala-db
              environment: POSTGRES_DB: ifala POSTGRES_USER: ifala_user
              POSTGRES_PASSWORD: ${IFALA_DB_PASSWORD} ports: - "5432:5432"
              ifala-backend: build: ./apps/ifala-backend container_name:
              ifala-backend ports: - "8080:8080" depends_on: - ifala-db
              ifala-frontend: build: ./apps/ifala-frontend container_name:
              ifala-frontend ports: - "5173:5173" depends_on: - ifala-backend
            </div>
          </section>

          <section id="nginx-gateway">
            <h3>Sobre o NGINX Gateway</h3>
            <p>
              Em produção, o NGINX pode atuar como gateway/reverse proxy,
              centralizando o acesso:
            </p>
            <ul>
              <li>
                Redirecionar <code>https://ifala.ifpi.edu.br/</code> → frontend.
              </li>
              <li>Encaminhar <code>/api</code> → backend (Spring Boot).</li>
              <li>Aplicar HTTPS, rate limiting, cache estático, etc.</li>
            </ul>
          </section>

          <section id="variaveis-ambiente">
            <h3>Variáveis de Ambiente</h3>
            <table>
              <thead>
                <tr>
                  <th>Variável</th>
                  <th>Descrição</th>
                  <th>Exemplo (não real)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>IFALA_DB_URL</td>
                  <td>URL de conexão com o banco</td>
                  <td>jdbc:postgresql://ifala-db:5432/ifala</td>
                </tr>
                <tr>
                  <td>IFALA_DB_USER</td>
                  <td>Usuário do banco</td>
                  <td>ifala_user</td>
                </tr>
                <tr>
                  <td>IFALA_DB_PASSWORD</td>
                  <td>Senha do banco</td>
                  <td><!-- preencher apenas em ambiente protegido --></td>
                </tr>
                <tr>
                  <td>IFALA_JWT_SECRET</td>
                  <td>Chave JWT</td>
                  <td><!-- preencher apenas em ambiente protegido --></td>
                </tr>
                <tr>
                  <td>VITE_API_URL</td>
                  <td>URL da API usada pelo frontend</td>
                  <td>http://localhost:8080/api</td>
                </tr>
                <tr>
                  <td>SMTP_HOST</td>
                  <td>Servidor SMTP para envio de e-mail</td>
                  <td>smtp.ifpi.edu.br</td>
                </tr>
              </tbody>
            </table>
          </section>

          <section id="credenciais-producao">
            <h3>Credenciais para produção</h3>
            <p>
              As credenciais de produção (senhas, tokens, chaves privadas) NÃO
              devem ser versionadas neste arquivo. Devem ser:
            </p>
            <ul>
              <li>
                Armazenadas em cofre de segredos (ex.: Vault, Secret Manager);
              </li>
              <li>Carregadas via variáveis de ambiente no servidor;</li>
              <li>Gerenciadas apenas por responsáveis autorizados.</li>
            </ul>
          </section>

          <section id="pipelines">
            <h3>Pipelines</h3>
            <p>A pipeline (CI/CD) pode executar automaticamente:</p>
            <ul>
              <li>Build do backend (maven/gradle) e testes;</li>
              <li>Build do frontend (Vite);</li>
              <li>Criação de imagens Docker;</li>
              <li>Deploy em ambiente de staging/produção.</li>
            </ul>
          </section>

          <section id="passo-a-passo-cli">
            <h3>Passo a passo via linha de comando</h3>
            <div class="code-block">
              # Acessar servidor ssh usuario@servidor-ifala # Ir para pasta do
              projeto cd /caminho/para/projeto-IFala # Atualizar código git pull
              origin main # Subir/recriar containers docker compose pull docker
              compose up -d --build
            </div>
          </section>

          <section id="deploy-tui">
            <h3>Como realizar o deploy via arquivo tui.sh</h3>
            <p>
              Em vez de rodar os comandos manualmente, o script
              <code>tui.sh</code> oferece uma interface em modo texto (TUI).
            </p>
            <div class="code-block">
              # Garantir permissão de execução chmod +x tui.sh # Executar TUI
              ./tui.sh
            </div>
          </section>

          <section id="sobre-tui">
            <h3>Sobre o Terminal User Interface (TUI)</h3>
            <p>O TUI facilita operações administrativas como:</p>
            <ul>
              <li>Atualizar o código da aplicação;</li>
              <li>Recriar containers com Docker Compose;</li>
              <li>Ver status dos serviços;</li>
              <li>Visualizar rapidamente logs ou mensagens de erro.</li>
            </ul>
          </section>
        </section>

        <!-- ========================================= -->
        <!-- ENCERRAMENTO -->
        <!-- ========================================= -->
        <section class="section">
          <h2>Encerramento</h2>
          <p>
            Esta documentação consolida a visão geral, arquitetura, fluxos e
            práticas de desenvolvimento do IFala. Ela deve ser mantida viva:
            sempre que novas features forem criadas ou ajustes significativos
            forem feitos, a documentação precisa ser atualizada.
          </p>
          <p style="color: var(--text-muted); margin-top: 0.5rem">
            Qualquer membro interessado pode contribuir, respeitando as boas
            práticas descritas na seção de Guia de Desenvolvimento.
          </p>
        </section>
      </main>
    </div>

    <script>
      const navLinks = document.querySelectorAll('.nav-link');
      const sections = document.querySelectorAll('section[id]');

      function onScroll() {
        const pos = window.scrollY + 120;
        let current = null;

        sections.forEach((sec) => {
          if (sec.offsetTop <= pos) {
            current = sec;
          }
        });

        if (!current) return;

        navLinks.forEach((link) => {
          const href = link.getAttribute('href');
          link.classList.toggle('active', href === `#${current.id}`);
        });
      }

      window.addEventListener('scroll', onScroll);
      onScroll();
    </script>
  </body>
</html>
